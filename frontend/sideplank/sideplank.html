<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Side Plank — Live Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <link href="/sideplank/style.css" rel="stylesheet">
  </head>

  <body>
    <main class="container">
      <section class="hero">
        <h1 class="gradient">Side Plank — Live Demo</h1>
        <p class="lead">Camera centered: left controls and right feedback — no JS changes, only frontend.</p>
      </section>

      <section class="layout">

        <!-- LEFT: controls -->
        <aside class="left-col panel" aria-label="Controls">
          <div class="counter-card" role="status" aria-live="polite" aria-atomic="true">
            <div class="label">Hold Time</div>
            <div id="holdTimeDisplay" class="value">0s</div>
          </div>

          <div class="target-input" title="Set your target hold time">
            <label for="targetTime">Target</label>
            <input id="targetTime" name="targetTime" type="number" min="1" step="1" value="30" aria-label="Target hold time in seconds" data-hook="target-time">
          </div>

          <div class="left-actions" style="margin-top:auto">
            <button id="detailedReportBtn" class="btn ghost small" data-action="get-detailed-report" aria-label="Get detailed report">Detailed report</button>
            <button id="resetSessionBtn" class="btn small" data-action="reset-session" aria-label="Reset session">Reset</button>
          </div>
          <div class="instructions" style="margin-top:10px" aria-hidden="false" role="note">
            <h3>Tips to improve form</h3>
            <ol>
              <li>Keep your body in a straight line from head to feet.</li>
              <li>Stack your feet or stagger them for balance.</li>
              <li>Engage your core and keep your hips lifted throughout the hold.</li>
            </ol>
          </div>
        </aside>

        <!-- CENTER: camera -->
        <div class="center-camera panel" aria-label="Camera area">
          <div style="width:100%; display:flex; justify-content:space-between; align-items:center;">
            <button id="webcamButton" class="mdc-button mdc-button--raised btn primary">
              <span class="mdc-button__label">ENABLE WEBCAM</span>
            </button>

            <div id="statusIndicator" class="status-indicator" style="font-size:13px;">
              <span class="dot" aria-hidden="true"></span>
              <span style="color:var(--muted)">Camera idle</span>
            </div>
          </div>

          <div class="wrapper" style="margin-top:12px;">
            <video id="webcam" autoplay playsinline muted></video>
            <canvas id="output_canvas" width="1280" height="720"></canvas>
          </div>

          <div style="width:100%; display:flex; justify-content:space-between; gap:12px; margin-top:10px;">
            <div style="color:var(--muted); font-size:13px">Live feed — pose overlay on canvas</div>
            <div style="color:var(--muted); font-size:13px">Session UI centered</div>
          </div>
        </div>

        <!-- RIGHT: AI feedback + stats + demo image -->
        <aside class="right-col panel" aria-label="Feedback and stats">
          <div class="ai-feedback">
            <h4 class="feedback-title">AI Feedback</h4>

            <!-- Advice container -->
            <div id="feedbackContent" class="feedback-box">
              <p>Advice from the AI will appear here. Maintain a straight body line, engage your core, and breathe steadily.</p>
            </div>

            <!-- Stats -->
            <div class="stats">
              <div class="stat">
                <small>Form Score</small>
                <strong id="formScore">—</strong>
              </div>
              <div class="stat">
                <small>Confidence</small>
                <strong id="confidence">—</strong>
              </div>
              <div class="stat">
                <small>Hold Time</small>
                <strong id="holdTime">0s</strong>
              </div>
            </div>
          </div>

          <div style="margin-top:12px" class="detectOnClick">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
              <div style="font-weight:800">Demo image</div>
              <div style="color:var(--muted); font-size:13px">Click to trigger detection</div>
            </div>
            <img src="https://th.bing.com/th/id/OIP.VIaEPGu0hDESujhDdCPCwgHaE8?o=7&cb=12&rm=3&rs=1&pid=ImgDetMain" crossorigin="anonymous" alt="Click to get side-plank detection!" title="Click to get side-plank detection!">
          </div>
        </aside>

      </section>
      
      <section>
        <div id="overlay" class="overlay" style="display:none;">
          <div class="overlay-content">
            <h2 class="overlay-title">Detailed Report</h2>
            <p id="reportContent">Your report goes here...</p>
            <button id="closeOverlay" class="btn ghost small">Close</button>
          </div>
        </div>
      </section>

    </main>
    <script type="module" src="/sideplank/sideplankmodel.js"></script>
  </body>
</html>